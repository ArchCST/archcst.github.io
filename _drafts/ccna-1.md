title: CCNA 学习笔记  
date: 2018-12-19  
updated:  
comments: true  
tags:  

-   learn

layout: post  

---

# 市面上的网络设备供应商

Cisco 的网络设备操作系统（IOS）是业界标准。Cisco 是定义业界标准的公司，它的很多标准都是先作为私有标准，过几年再开放成共有标准，所以 Cisco 是网工的前沿。  
华为、H3C 等操作界面不同，命令不同，但内核是和 Cisco 一样的。  
新网锐捷主要做教育网，操作界面和 Cisco 是一样的的。  

所以，Cisco 学会之后，转向华为、H3C等设备只需要阅读一下操作手册，知道命令对应的关系即可轻松上手。  

# 学习过程

1.  了解网路原理，OSI，TCP/IP
2.  如何配置网络设备，路由器，交换机，IOS，IOS XE（低端），IOS XR（高端），NX-OS
3.  排错（TS）

# 简单的网络课程

终端系统：例如 PC 、服务器等处于网络末端的设备  
中间系统：网络设备，例如集线器（Hub）、交换机（Switch）、多层交换机（MLSwitch）、路由器（Router）  
介质：双绞线（电缆，水晶头）、光纤（光缆，一般在交换机上使用 lc 口）、无线等  

# 网络设备

Cisco 的所有设备在 [这里](https://www.cisco.com/c/en/us/support/index.html) 。  

## 交换机系列

比较重要的两个系列是 Catalyst Series 和 Nexus Series。  

Catalyst Series：  
传统园区网多使用这个系列，一般是在不需要部署云计算、数据中心时，使用这个系列。  
`2` 开头的为二层交换机，例如用得比较多的 2960-X  
`3` 开头的为三层交换机，例如用得比较多的 3560 和它的升级版 3650，3750 和它的升级版 3850  
2、3开头的都是 `盒式交换机` ，硬件、接口、引擎等都已经固化了。  
剩下的 4500、4900、6400、6800 等为基架式交换机，需要自己配置硬件。成本很高，一般放在核心层。  

Nexus Series：  
数据中心、云计算等需要使用虚拟化技术的情况下，使用 Nexus Series  
Nexus Series 提供了 Cisco 引以为豪的 Fabricpath 功能，可以把这个区域设计在大二层中，不经过三层。Cisco 称之为 2nd Ethernet。  

# 交换机

标准的机架（Rack）是 42U，=U= 表示机架单元。盒式交换机占用 1U。  
二层交换机，例如 2960：  
2960，有 24 口和 48 口两种，电口（黄色面板）和光口（白色面板）都有。  
右侧有两个独立的接口，称之为 `级联接口` 。级联接口的带宽高于交换机左侧的电口或光口一个数量级。级联接口一定是光口，因为级联接口通常连接到核心机房，距离比较远，双绞线超出100米传输效率就不行了。多模光纤可以支持 1000M 以上。  
2960 系列支持 IOS 12.2 版本。  

使用光缆的时候不是直接把光纤的 lc 直接抽在光口上，而是需要添加一个 `SFP（小型光模块）` 。  

三层交换机，例如 3560-X：  
除了实现二层的所有功能外，还提供一些路由（三层）的功能。价格上比 2960 贵很多。一般放在汇聚层。  
3560 历经三代，第一代就是 3560 支持 IOS 12.2 版本，第二代叫 3560v2 支持 IOS 12.4 版本，已经被淘汰。第三代 3560-E 和更高端的 3560-X 支持 IOS 15.2 版本。  

{% note info %}  
IOS 15.x 版本很多功能需要购买 license，一个 license 至少是 $2000 以上，应该按需采购。  
可以申请 [Demo license](https://www.cisco.com/go/license) ，有 120 天到期时间。  
{% endnote %}  

# 路由器

Enterprise Router  
用得最多的是 2800（12.4系统，可使用15.4，而且不需要 license）、2900（15.4系统） 两个系列。  
路由器的接口很少，一般是放在园区的边缘作为出口使用，直接端接 ISP 。  

Aggregation Services(ASR)  
运营商使用，一般用于骨干链路上。搭载 ISO-XR 系统。  

Connected Grid  

Induastrial  

Mobile Wireless  
无线路由器  

Small Business Routers  
小型站点路由器  

# GNS3

GNS3 中使用的 IP 地址为 127.0.0.1。  
路由器1对应的端口号为2001，路由器2对应的端口号为2002，以此类推。  

# 基础概念

## 单工、半双工、全双工

单工：数据始终只能像一个方向发送，例如 PC 发送文件到打印机  
半双工：同一时间只能实现一个方向的数据传输，例如对讲机  
全双工：同一时间可以实现两个方向的数据传输，例如手机、交换机  

## 单播、组播、广播

单播：一对一  
组播：一对多  
广播：一对所有  

## Console

路由器上有专门的 Console 口，需要用 Console 线接入。  
Console 线的一端是 RJ45 水晶头，插入路由器的 Console 口。另一端是 RS232 串口接头，用于连接 PC。现在的 PC 或 Laptop 很多没有 Console 口，那么还需要一根 USB-RS232 转接线。  

## 三层组网模型

核心层（Core Layer）：主交换机，主要使用三层设备  
汇聚层（Distribution Layer）：楼层交换机、路由器，主要使用三层设备  
接入层（Access Layer）：连接终端，主要使用二层设备  

## OSI 七层模型

OSI 七层模型每一层都有自己的功能集，层与层之间相互独立又相互依靠，上层依赖于下层，下层为上层提供服务。  

### 应用层

功能：为应用软件提供接口，让应用程序能够使用网络  
协议：http(80), ftp(20/21), smtp(25), pop3(110), telnet(23), dns(53)  

### 表示层

功能：数据的编码和解码，输的加密和解密，数据的压缩和解压缩  

### 会话层

功能：建立、维护、管理应用程序之间的会话，对话控制，同步  

### 传输层

功能：负责建立端到端的连接，保证报文在端到端之间的传输。服务点编址、分段与重组、连接控制、流量控制、差错控制  
数据：数据段 Segment  
报头：源端口、目的端口  

### 网络层

功能：负责将分组数据从源端发送到目的端，为网络设备提供逻辑地址，进行路由选择，分组转发  
数据：数据包 Packet  
报头：源 IP 、目的 IP 、协议号  
协议：IPv4、IPv6  

1.  路由器

    路由器的主要功能：  
    
    1.  广播控制
    2.  组播控制
    3.  决定最优路径
    4.  流量控制
    5.  提供逻辑地址（IP）
    6.  连接广域网
    
    路由器  
    
    1.  每个接口都有自己的冲突域
    2.  每个接口都有一个广播域

### 链路层

功能：在不可靠的物理链路上，提供可靠的数据传输服务，把帧从一跳移动到另一跳。组帧、物理编址、流量控制、差错控制、接入控制  
数据：数据帧 Frame  
报头：源 MAC 、目的 MAC 、帧类型  
设备：网卡（网络适配器）、交换机  

1.  二层交换机（Switch）

    二层交换机的主要特点：  
    
    1.  每个接口都有自己的冲突域
    2.  所有的接口都在一个广播域

2.  LLC 和 MAC

    逻辑链路控制（Logical Link Control）：  
    
    -   将网络层数据包封装成 `帧`
    -   标识网络层协议
    
    介质访问控制（Media Access Control）：  
    
    -   标明帧的地址
    -   标示帧的开始和结束位置

### 物理层

功能：负责把逐个的比特从一跳移动到另一跳。定义接口和媒体的物理特性，定义比特的表示、数据传输速率、信号的传输模式（单工、半双工、全双工），定义网络物理拓扑（网状、星形、环形、总线型等拓扑）  
数据：比特 bit ，二进制流  

1.  集线器（Hub）

    集线器的主要特点：  
    
    1.  所有设备都在一个冲突域（collision domain）
    2.  所有设备都在一个广播域（broadcast domain）
    3.  设备共享带宽
    
    冲突域的解决方式是 CSMA/CD ，工作方式为：=先听后说，边听边说；一旦冲突，立即停说；等待时机，然后再说；= ，意为在发送数据前，先监听总线是否空闲。若总线忙，则不发送。若总线空闲，则把准备好的数据发送到总线上。在发送数据的过程中，工作站边发送边检测总线，是否自己发送的数据有冲突。若无冲突则继续发送直到发完全部数据；若有冲突，则立即停止发送数据，但是要发送一个加强冲突的JAM信号，以便使网络上所有工作站都知道网上发生了冲突，然后，等待一个预定的随机时间，且在总线为空闲时，再重新发送未发完的数据。  
    
    Hub 现在基本上已经被淘汰了，基本不会使用。  

## 线缆

### 双绞线（电缆）

-   非屏蔽双绞线（UTP）电缆，有效长度 100 米。
-   屏蔽双绞线（STP）电缆

两种线序标准：  

-   568A：绿白绿、橙白蓝、蓝白橙、棕白棕
-   568B：橙白橙、绿白蓝、蓝白绿、棕白棕

根据两种线序，可以制作出两种电缆：  
以太网直通电缆：两端线序相同，用于不同层设备之间的连接  
以太网交叉电缆：两端线序不同，用于同层设备之间的连接  

有一个例外，计算机直接连接路由器需要使用交叉电缆。  

现代的网卡都自适应线序了，交叉线很少再使用。  

### 光纤（光缆）

光纤分为单模和多模两种，主要区别在 `玻璃核心` 的粗细。  

单模：  

-   较细，支持单一光通路
-   散射低，适合长距离传输（100 km）
-   使用激光作为光源，一般用于园区主干

多模：  

-   较粗，支持多条光通路
-   散射较强，更易丢失数据，通常用于小于 2 km 的长距离传输
-   使用 LED 作为光源，一般用于 LAN，或园区网内数百米的传输距离

一般使用单模，多模的光纤贵很多。  
